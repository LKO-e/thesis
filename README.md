# thesis
## Репозиторий программного кода диссератции   
### Расчётная часть   
Для запуска скриптов на языке Python требуются библиотеки ````NumPy````, ````SciPy````, ````SymPy````, ````Matplotlib````, а также ````CVXPY```` и ````CVXOPT```` для решения задач выпуклого программирования.   
#### Математическая модель ОСГГС*
_* ОСГГС — одноосный силовой горизонтальный гироскопический стабилизатор._   
           
````ref_frames.py```` —  скрипт для выполнения преобразований координат, нахождения проекций мгновенных абсолютных угловых скоростей и кажущегося ускорения (подраздел 2.1).   
````psd_plot.py```` — скрипт для создания графиков спектральных плотностей мощности возмущающих воздействий (подраздел 2.2).   
#### Синтез контура коррекции ОСГГС (подраздел 2.4)
````opt_corr_loop.py```` — скрипт для построения графиков по графоаналитическому способу оптимального синтеза комплементарного фильтра из [1].   
#### Выбор конструктивных элементов (подраздел 2.5)
````pitch_filter.py```` — скрипт для построения ЛАХ погрешности, вносимой фильтром нижних частот акселерометра, используемого для определения угла тангажа подвижного основания.  
#### Синтез контура стабилизации ОСГГС (подраздел 2.6)   
Файлы с префиксом _sl (stabilization loop)_ относятся к синтезу контура стабилизации.   
````sl_h2.py```` — скрипт синтеза регулятора контура стабилизации по критерию $H_2$ нормы с помощью методов выпуклой оптимизации (подраздел 2.6.2) на основе [2].    
````sl_h2_noise.py```` — скрипт для оптимального синтеза регулятора контура стабилизации по критерию $H_2$ нормы с помощью методов выпуклой оптимизации с учётом повышенного шума датчика угла (подраздел 2.6.2) на основе [2].    
````sl_ellips.py```` — скрипт для оптимального синтеза регулятора контура стабилизации по эллипсоидному критерию с помощью методов выпуклой оптимизации (подраздел 2.6.3) на основе [2].   
````sl_mixed_ellips_hinf.py```` — скрипт для оптимального синтеза регулятора контура стабилизации по эллипсоидному критерию с помощью методов выпуклой оптимизации на базе метода из [3] (подраздел 2.6.4).   
````sl_fixed_struct_h2.py```` —  скрипт для оптимального синтеза регуляторов контура фиксированной структуры по критерию $H_2$ нормы с помощью методов стохастической глобальной оптимизации (подраздел 2.6.5). Способ является развитием идеи из [4]. При запуске будет предложен выбор рассматриваемых случаев, номер которых соответствуют номерам в таблице №2.  
````sl_fixed_struct_ellips.py```` —  скрипт для оптимального синтеза регуляторов контура фиксированной структуры по эллипсиодному критерию с помощью методов стохастической глобальной оптимизации (подраздел 2.6.5). Способ является развитием идеи из статьи  [4]. При запуске будет предложен выбор рассматриваемых случаев, номер которых соответствуют номерам в таблице №3.   
````sl_case_6_h2.py```` — скрипт для оптимального синтеза цифрового регулятора (№6 в таб. №2) фиксированной структуры (выбора коэффициента усиления и периода дискретизации) контура стабилизации по критерию $H_2$ нормы, основанном на эффекте увеличения устойчивости систем с колебательными / консервативными звеньями только за счёт выбора периода дискретизации [5, §6-7].    
````sl_case_6_ellips.py```` — скрипт для оптимального синтеза цифрового регулятора (№6 в таб. №3) фиксированной структуры (выбора коэффициента усиления и периода дискретизации) контура стабилизации по эллипсоидному критерию, основанном на эффекте увеличения устойчивости систем с колебательными / консервативными звеньями только за счёт выбора периода дискретизации [5, §6-7].   
````sl_case_6_sim.py```` — скрипт для моделирования переходных процессов в контуре стабилизации с цифровым регулятором (№6 в таб. №2).    
````sl_controllers.json```` — файл, куда сохранются модели синтезированных регуляторов (кроме цифрового регулятора №6) и модели контура стабилизации в виде пространства состояний. При каждом успешном запуске скриптов с синтезом регуляторв данные перезаписываются. Данные синтезов в версии файла из репозитория приедены для примера.   
````sl_plots.py```` — скрипт для создания графиков по синтезированным контроллерам, которые приведены в подразделе 2.6.6. При запуске без дополнительных аргументов графики будут выведены на экран. Если указать первым аргументом (после названия скрипта) в командной строке путь к папке, то графики будут сохранены в указанную папку.   
#### Динамическая настройка гиромаятника (подраздел 3.2)
````sl_gyro_pend_ctrl.py```` — скрипт для расчёта регулятора динамической настройки гиромаятника и построения ЛАХ, ЛФХ и реакции на единичный скачок команды.   
````sl_gyro_pend_norm.py```` — скрипт для оценки влияния погрешности динамической настройки гиромаятника на общую погрешность ОСГГС (первое замечание подраздела 3.2).   
### Имитационное моделирование
Для проведения имитационного моделирования понадобится С++ компилятор (GCC, Clang или MSVC (Visual Studio)) и библиотека ````Boost````.       
Для упрощения запуска кода созданы следующие скрипты, в которых записано компилирование, запуск моделирования и создание графиков в папке plots в пути, где расположены сами файлы:    
````gyro_vert_sim_run```` — bash-файл для Linux и macOS.   
````gyro_vert_sim_run.bat```` —  batch-файл для Windows, который необходимо запускать из терминала Visual Code.  
````gyro_pend_sim_run```` — bash-файл для Linux и macOS.   
````gyro_pend_sim_run.bat```` —  batch-файл для Windows, который необходимо запускать из терминала Visual Code.   
Исходный код имитационного моделирования (раздел 4) всего ОСГГС (силовой гировертикали) находится в файлах ````gyro_vert_sim.hpp```` и ````gyro_vert_sim.cpp````. Флаги скомпилированной программы: 
- ````-h, --help```` — вывод подсказки;
- ````-d, --dynamic_tuning [ON / off]```` — включение (по умолчанию) и выключение системы динамической настройки гиромаятника;
- ````-e, --earth_rate_correction [ON / off]```` — включение (по умолчанию) и выключение контура коррекции кажущегося дрейфа из-за вращения Земли;
- ````-p, --pitch_correction [ON / off]```` — включение (по умолчанию) и выключение контура наклона вектора кинетического момента ОСГГС по местной вертикали;
- ````-v, --vel_meas_error [on / OFF]```` — включение и выключение (по умолчанию) погрешности измерения линейной скорости подвижного основания;
- ````-o, --output [file_name]```` — указание пути к файлу для сохранения результатов моделирования (по умолчанию это ````sim_gv.csv```` в текущей папке). 

Python-скрипт ````gyro_vert_sim_plot.py```` используется для построения графиков по результатам имитационного моделирования ОСГГС. Первым аргументом командной строки (после названия скрипта) необходимо указать файл с результатами моделирования. Второй аргумент — это путь к папке для сохранения графиков; если он не указан графики выведутся на экран.       
Исходный код моделирования (подраздел 3.2) системы динамической настройки гиромаятника с учётом нелинейности насыщения находится в файле ````gyro_pend_sim.cpp````.  Флаги скомпилированной программы: 
- ````-o, --output [file_name]```` — указание пути к файлу для сохранения результатов моделирования (по умолчанию это ````sim_gp.csv```` в текущей папке).

Python-скрипт ````gyro_pend_sim_plot.py```` используется для построения графиков по результатам  моделирования системы динамической настройки. Первым аргументом командной строки (после названия скрипта) необходимо указать файл с результатами моделирования. Второй аргумент — это путь к папке для сохранения графиков; если он не указан графики выведутся на экран.   
Если библиотека ````Boost```` располагается в стандартных адресах для используемой операционной системы, то скрипты подключат её автоматически. Если это не удастся, то будет предложено ввести путь вручную.      
Данный код тестровался на следующих операционных системах и компиляторах: Windows x64 (MSVC), Linux x64 (GCC, Clang), macOS aarch64 (GCC, Clang). Другие комбинации платформ, операционных систем и компиляторов также возможны; в таком случае необходимо задать команды компилятора аналогично тем, что используются в скриптах.   
### Прочее   
````src.py```` — файл, содержащий вспомогательные функции и численные значение основных параметров.   
````plot_style.py```` — файл, содержащий настройки внешнего вида графиков matplotlib.   
````Bootstrap.asc```` — файл, содержащий модель стойки ШИМ разработанной платы драйвера электродвигателя для моделирования в LTSpice.   
````pwm_sim.txt```` — файл с результатами моделирования стойки ШИМ разработанного драйвера электродвигателя.   
````pwm_sim_plot.py```` — скрипт для создания графиков по результатам моделирования стойки ШИМ разработанного драйвера электродвигателя.   
### Ссылки
1. Лукин, К.О. Графоаналитический метод оптимального синтеза контура маятниковой коррекции гироскопических вертикалей / К.О. Лукин, С.В. Кривошеев // Изв. вузов. Приборостроение. — 2023. — Т. 66, № 8. — С. 651–661. ````DOI: 10.17586/0021-3454-2023-66-8-660-670````.
2. Lukin, K.O. An optimal control synthesis for a gyro stabilized platform’s stabilization loop / K.O. Lukin, S.V. Krivosheev // Russian Aeronautics. — 2024. — Vol. 67, No 1. — P. 127–137. ````DOI: 10.3103/S106879982401015X````.
3. Scherer, P. Multiobjective output-feedback control via LMI optimization / C. Scherer, P. Gahinet, M. Chilali // IEEE Transactions on Automatic Control. — 1997. — Vol. 42, No 7. — P. 896–911. ````DOI: 10.1109/9.599969````.
4. Lukin, K.O. Statistical parametric design of a controller in the stabilization loop of a single axis gyro-stabilized platform using stochastic global optimization methods / K.O. Lukin, S.V. Krivosheev // Russian Aeronautics. — 2022. — Vol. 65, No 1. — P. 111–120. — ````DOI: 10.3103/S1068799822010123````. 
5. Фёдоров, С.М. Автоматические системы с цифровыми управляющими машинами (теория и проектирование) / С.М. Федоров, А.П. Литвинов. — Л.: Энергия, 1965. — 223 с.   