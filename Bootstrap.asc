Version 4
SHEET 1 5668 1284
WIRE -80 -576 -144 -576
WIRE 96 -576 0 -576
WIRE 224 -576 96 -576
WIRE 320 -576 224 -576
WIRE 448 -576 384 -576
WIRE 656 -576 448 -576
WIRE 736 -576 656 -576
WIRE 1072 -576 800 -576
WIRE 96 -544 96 -576
WIRE 656 -480 656 -576
WIRE 96 -448 96 -480
WIRE 592 -432 560 -432
WIRE 448 -416 448 -576
WIRE 224 -384 224 -576
WIRE 656 -352 656 -384
WIRE 800 -352 656 -352
WIRE 944 -352 944 -432
WIRE 800 -272 800 -352
WIRE 896 -272 800 -272
WIRE 336 -192 288 -192
WIRE 448 -192 448 -336
WIRE 448 -192 400 -192
WIRE 560 -192 560 -432
WIRE 560 -192 448 -192
WIRE 624 -192 560 -192
WIRE 800 -192 800 -272
WIRE 800 -192 688 -192
WIRE 832 -192 800 -192
WIRE 944 -192 944 -256
WIRE 944 -192 912 -192
WIRE 16 -160 -16 -160
WIRE 128 -160 80 -160
WIRE 448 -144 448 -192
WIRE 1248 -128 1248 -192
WIRE 1360 -128 1360 -192
WIRE 1472 -128 1472 -192
WIRE 1584 -128 1584 -176
WIRE 128 -96 128 -160
WIRE 224 -96 224 -304
WIRE 224 -96 128 -96
WIRE 288 -96 288 -192
WIRE 288 -96 224 -96
WIRE 384 -96 288 -96
WIRE 944 -96 944 -192
WIRE 1072 -96 1072 -576
WIRE 1072 -96 944 -96
WIRE -192 -48 -224 -48
WIRE -16 -48 -16 -160
WIRE -16 -48 -112 -48
WIRE 64 -48 -16 -48
WIRE 448 0 448 -48
WIRE 944 0 944 -96
WIRE 1248 0 1248 -48
WIRE 1360 0 1360 -48
WIRE 1472 0 1472 -48
WIRE 1584 0 1584 -48
WIRE 128 48 128 0
WIRE 944 272 944 80
FLAG 1584 0 0
FLAG 1360 0 0
FLAG 1472 0 0
FLAG 1360 -192 Vh
FLAG 1472 -192 Vbs
FLAG 1584 -176 Vctrl
FLAG 1248 0 0
FLAG 1248 -192 +3V
FLAG 944 272 0
FLAG 944 -432 Vh
FLAG -144 -576 Vbs
FLAG -224 -48 Vctrl
FLAG 448 0 0
FLAG 128 48 0
FLAG 96 -448 0
SYMBOL voltage 1584 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 3 0 1p 1p 1u 2u)
SYMBOL voltage 1360 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 20
SYMBOL voltage 1472 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL voltage 1248 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 3
SYMBOL res 432 -432 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL nmos 896 -352 R0
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL cap 800 -592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 1µ
SYMATTR SpiceLine V=100 Irms=3.96 Rser=0.0234673 Lser=0 mfg="KEMET" pn="C1825C105K1RAC" type="X7R"
SYMBOL res 928 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res -96 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL schottky 320 -560 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value SS38
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL npn 64 -96 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL res 208 -400 R0
SYMATTR InstName R15
SYMATTR Value 2k
SYMBOL schottky 16 -144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value BAT41
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 336 -176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value BAT41
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL npn 384 -144 R0
SYMATTR InstName Q4
SYMATTR Value BCP56
SYMBOL npn 592 -480 R0
SYMATTR InstName Q5
SYMATTR Value BCP56
SYMBOL schottky 688 -208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMATTR Value SS14
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 928 -16 R0
SYMATTR InstName R19
SYMATTR Value 5
SYMBOL cap 112 -480 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 10µ
SYMATTR SpiceLine V=100 Irms=3.96 Rser=0.0234673 Lser=0
SYMBOL ind 16 -592 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 5n
TEXT 1208 104 Left 2 !.tran 8us
TEXT 1200 136 Left 2 !.meas TRAN pow_R6 AVG I(R6)*V(N008)
TEXT 1200 184 Left 2 !.meas pow_Q3 AVG Ie(Q3)*(V(N006)-V(N008))
TEXT 1200 232 Left 2 !.meas pow_Q4 AVG Ie(Q4)*(V(N001)-V(N005))
TEXT 1200 280 Left 2 !.meas I_RMS_MCU AVG ABS(Id(M2))
TEXT 1200 328 Left 2 !.meas pow_R2 AVG I(R2)*(V(N001)-V(N003))
TEXT 1200 384 Left 2 !.meas pow_total AVG I(V3)*(V(Vbs))
TEXT -272 -80 Left 2 ;MCU
RECTANGLE Normal -208 32 -320 -128 2
